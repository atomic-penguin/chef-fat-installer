<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />

	<title>Module: Extlib::Hook::ClassMethods</title>

	<link rel="stylesheet" href="../../rdoc.css" type="text/css" media="screen" />

	<script src="../../js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="../../js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>

</head>
<body class="module">

	<div id="metadata">
		<div id="home-metadata">
			<div id="home-section" class="section">
        <h3 class="section-header">
          <a href="../../index.html">Home</a>
          <a href="../../index.html#classes">Classes</a>
          <a href="../../index.html#methods">Methods</a>
        </h3>
			</div>
		</div>

		<div id="file-metadata">
			<div id="file-list-section" class="section">
				<h3 class="section-header">In Files</h3>
				<div class="section-body">
					<ul>
					
						<li><a href="../../lib/extlib/hook_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="lib/extlib/hook.rb">lib/extlib/hook.rb</a></li>
					
					</ul>
				</div>
			</div>

			
		</div>

		<div id="class-metadata">

			<!-- Parent Class -->
			

			<!-- Namespace Contents -->
			

			<!-- Method Quickref -->
			
			<div id="method-list-section" class="section">
				<h3 class="section-header">Methods</h3>
				<ul class="link-list">
					
					<li><a href="#method-i-after">#after</a></li>
					
					<li><a href="#method-i-after_class_method">#after_class_method</a></li>
					
					<li><a href="#method-i-args_for">#args_for</a></li>
					
					<li><a href="#method-i-before">#before</a></li>
					
					<li><a href="#method-i-before_class_method">#before_class_method</a></li>
					
					<li><a href="#method-i-class_hooks">#class_hooks</a></li>
					
					<li><a href="#method-i-define_advised_method">#define_advised_method</a></li>
					
					<li><a href="#method-i-define_hook_stack_execution_methods">#define_hook_stack_execution_methods</a></li>
					
					<li><a href="#method-i-hook_method_name">#hook_method_name</a></li>
					
					<li><a href="#method-i-hooks_with_scope">#hooks_with_scope</a></li>
					
					<li><a href="#method-i-inline_call">#inline_call</a></li>
					
					<li><a href="#method-i-install_hook">#install_hook</a></li>
					
					<li><a href="#method-i-instance_hooks">#instance_hooks</a></li>
					
					<li><a href="#method-i-method_with_scope">#method_with_scope</a></li>
					
					<li><a href="#method-i-process_method_added">#process_method_added</a></li>
					
					<li><a href="#method-i-quote_method">#quote_method</a></li>
					
					<li><a href="#method-i-register_class_hooks">#register_class_hooks</a></li>
					
					<li><a href="#method-i-register_hook">#register_hook</a></li>
					
					<li><a href="#method-i-register_instance_hooks">#register_instance_hooks</a></li>
					
					<li><a href="#method-i-registered_as_hook%3F">#registered_as_hook?</a></li>
					
					<li><a href="#method-i-reset_hook%21">#reset_hook!</a></li>
					
				</ul>
			</div>
			

			<!-- Included Modules -->
			
			<div id="includes-section" class="section">
				<h3 class="section-header">Included Modules</h3>
				<ul class="link-list">
				
				
					<li><a class="include" href="../Assertions.html">Extlib::Assertions</a></li>
				
				
				</ul>
			</div>
			
		</div>

		<div id="project-metadata">
			
			
			<div id="fileindex-section" class="section project-section">
				<h3 class="section-header">Files</h3>
				<ul>
				
					<li class="file"><a href="../../LICENSE.html">LICENSE</a></li>
				
					<li class="file"><a href="../../README_rdoc.html">README.rdoc</a></li>
				
				</ul>
			</div>
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="../../images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="../../Extlib.html">Extlib</a></li>
				
					<li><a href="../../Extlib/Assertions.html">Extlib::Assertions</a></li>
				
					<li><a href="../../Extlib/ByteArray.html">Extlib::ByteArray</a></li>
				
					<li><a href="../../Extlib/Hook.html">Extlib::Hook</a></li>
				
					<li><a href="../../Extlib/Hook/ClassMethods.html">Extlib::Hook::ClassMethods</a></li>
				
					<li><a href="../../Extlib/Inflection.html">Extlib::Inflection</a></li>
				
					<li><a href="../../Extlib/LocalObjectSpace.html">Extlib::LocalObjectSpace</a></li>
				
					<li><a href="../../Extlib/Logger.html">Extlib::Logger</a></li>
				
					<li><a href="../../Extlib/Pooling.html">Extlib::Pooling</a></li>
				
					<li><a href="../../Extlib/Pooling/InvalidResourceError.html">Extlib::Pooling::InvalidResourceError</a></li>
				
					<li><a href="../../Extlib/Pooling/Pool.html">Extlib::Pooling::Pool</a></li>
				
					<li><a href="../../Extlib/SimpleSet.html">Extlib::SimpleSet</a></li>
				
					<li><a href="../../Gem.html">Gem</a></li>
				
					<li><a href="../../Gem/SourceIndex.html">Gem::SourceIndex</a></li>
				
					<li><a href="../../Gem/Specification.html">Gem::Specification</a></li>
				
					<li><a href="../../Array.html">Array</a></li>
				
					<li><a href="../../Class.html">Class</a></li>
				
					<li><a href="../../ClassMethods.html">ClassMethods</a></li>
				
					<li><a href="../../DateTime.html">DateTime</a></li>
				
					<li><a href="../../Dictionary.html">Dictionary</a></li>
				
					<li><a href="../../FalseClass.html">FalseClass</a></li>
				
					<li><a href="../../Hash.html">Hash</a></li>
				
					<li><a href="../../LazyArray.html">LazyArray</a></li>
				
					<li><a href="../../LazyModule.html">LazyModule</a></li>
				
					<li><a href="../../Mash.html">Mash</a></li>
				
					<li><a href="../../Module.html">Module</a></li>
				
					<li><a href="../../NilClass.html">NilClass</a></li>
				
					<li><a href="../../Numeric.html">Numeric</a></li>
				
					<li><a href="../../Object.html">Object</a></li>
				
					<li><a href="../../ObjectSpace.html">ObjectSpace</a></li>
				
					<li><a href="../../Pathname.html">Pathname</a></li>
				
					<li><a href="../../REXMLUtilityNode.html">REXMLUtilityNode</a></li>
				
					<li><a href="../../String.html">String</a></li>
				
					<li><a href="../../Struct.html">Struct</a></li>
				
					<li><a href="../../Symbol.html">Symbol</a></li>
				
					<li><a href="../../Time.html">Time</a></li>
				
					<li><a href="../../TrueClass.html">TrueClass</a></li>
				
					<li><a href="../../VirtualFile.html">VirtualFile</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1 class="module">Extlib::Hook::ClassMethods</h1>

		<div id="description">
			
		</div>

		<!-- Constants -->
		

		<!-- Attributes -->
		

		<!-- Methods -->
		
		<div id="public-instance-method-details" class="method-section section">
			<h3 class="section-header">Public Instance Methods</h3>

		
			<div id="after-method" class="method-detail ">
				<a name="method-i-after"></a>

				<div class="method-heading">
				
					<span class="method-name">after</span><span
						class="method-args">(target_method, method_sym = nil, &block)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Inject code that executes after the target instance method.
</p>
<p>
@param target_method<Symbol>  the name of the instance method to inject
after @param method_sym<Symbol>     the name of the method to run after the
</p>
<pre>
  target_method
</pre>
<p>
@param block<Block>           the code to run after the target_method
</p>
<p>
@note
</p>
<pre>
  Either method_sym or block is required.
</pre>
<ul>
<li><p>
@api public
</p>
</li>
</ul>
					

					
					<div class="method-source-code"
						id="after-source">
<pre>
     <span class="ruby-comment cmt"># File lib/extlib/hook.rb, line 110</span>
110:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">after</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">method_sym</span> = <span class="ruby-keyword kw">nil</span>, &amp;<span class="ruby-identifier">block</span>)
111:         <span class="ruby-identifier">install_hook</span> <span class="ruby-value">:after</span>, <span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">method_sym</span>, <span class="ruby-value">:instance</span>, &amp;<span class="ruby-identifier">block</span>
112:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="after-class-method-method" class="method-detail ">
				<a name="method-i-after_class_method"></a>

				<div class="method-heading">
				
					<span class="method-name">after_class_method</span><span
						class="method-args">(target_method, method_sym = nil, &block)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Inject code that executes after the target class method.
</p>
<p>
@param target_method<Symbol>  the name of the class method to inject after
@param method_sym<Symbol>     the name of the method to run after the
target_method @param block<Block>           the code to run after the
target_method
</p>
<p>
@note
</p>
<pre>
  Either method_sym or block is required.
</pre>
<ul>
<li><p>
@api public
</p>
</li>
</ul>
					

					
					<div class="method-source-code"
						id="after-class-method-source">
<pre>
    <span class="ruby-comment cmt"># File lib/extlib/hook.rb, line 78</span>
78:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">after_class_method</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">method_sym</span> = <span class="ruby-keyword kw">nil</span>, &amp;<span class="ruby-identifier">block</span>)
79:         <span class="ruby-identifier">install_hook</span> <span class="ruby-value">:after</span>, <span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">method_sym</span>, <span class="ruby-value">:class</span>, &amp;<span class="ruby-identifier">block</span>
80:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="args-for-method" class="method-detail ">
				<a name="method-i-args_for"></a>

				<div class="method-heading">
				
					<span class="method-name">args_for</span><span
						class="method-args">(method)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
&#8212; Helpers &#8212;
</p>
					

					
					<div class="method-source-code"
						id="args-for-source">
<pre>
     <span class="ruby-comment cmt"># File lib/extlib/hook.rb, line 384</span>
384:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">args_for</span>(<span class="ruby-identifier">method</span>)
385:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">method</span>.<span class="ruby-identifier">arity</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
386:           <span class="ruby-value str">&quot;&amp;block&quot;</span>
387:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">method</span>.<span class="ruby-identifier">arity</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
388:           <span class="ruby-value str">&quot;_&quot;</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-value">1</span> <span class="ruby-operator">..</span> <span class="ruby-identifier">method</span>.<span class="ruby-identifier">arity</span>).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;, _&quot;</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;, &amp;block&quot;</span>
389:         <span class="ruby-keyword kw">elsif</span> (<span class="ruby-identifier">method</span>.<span class="ruby-identifier">arity</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
390:           <span class="ruby-value str">&quot;_&quot;</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-value">1</span> <span class="ruby-operator">..</span> (<span class="ruby-identifier">method</span>.<span class="ruby-identifier">arity</span>).<span class="ruby-identifier">abs</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;, _&quot;</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;, *args, &amp;block&quot;</span>
391:         <span class="ruby-keyword kw">else</span>
392:           <span class="ruby-value str">&quot;*args, &amp;block&quot;</span>
393:         <span class="ruby-keyword kw">end</span>
394:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="before-method" class="method-detail ">
				<a name="method-i-before"></a>

				<div class="method-heading">
				
					<span class="method-name">before</span><span
						class="method-args">(target_method, method_sym = nil, &block)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Inject code that executes before the target instance method.
</p>
<p>
@param target_method<Symbol>  the name of the instance method to inject
before @param method_sym<Symbol>     the name of the method to run before
the
</p>
<pre>
  target_method
</pre>
<p>
@param block<Block>           the code to run before the target_method
</p>
<p>
@note
</p>
<pre>
  Either method_sym or block is required.
</pre>
<ul>
<li><p>
@api public
</p>
</li>
</ul>
					

					
					<div class="method-source-code"
						id="before-source">
<pre>
    <span class="ruby-comment cmt"># File lib/extlib/hook.rb, line 94</span>
94:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">before</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">method_sym</span> = <span class="ruby-keyword kw">nil</span>, &amp;<span class="ruby-identifier">block</span>)
95:         <span class="ruby-identifier">install_hook</span> <span class="ruby-value">:before</span>, <span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">method_sym</span>, <span class="ruby-value">:instance</span>, &amp;<span class="ruby-identifier">block</span>
96:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="before-class-method-method" class="method-detail ">
				<a name="method-i-before_class_method"></a>

				<div class="method-heading">
				
					<span class="method-name">before_class_method</span><span
						class="method-args">(target_method, method_sym = nil, &block)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Inject code that executes before the target class method.
</p>
<p>
@param target_method<Symbol>  the name of the class method to inject before
@param method_sym<Symbol>     the name of the method to run before the
</p>
<pre>
  target_method
</pre>
<p>
@param block<Block>           the code to run before the target_method
</p>
<p>
@note
</p>
<pre>
  Either method_sym or block is required.
</pre>
<ul>
<li><p>
@api public
</p>
</li>
</ul>
					

					
					<div class="method-source-code"
						id="before-class-method-source">
<pre>
    <span class="ruby-comment cmt"># File lib/extlib/hook.rb, line 63</span>
63:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">before_class_method</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">method_sym</span> = <span class="ruby-keyword kw">nil</span>, &amp;<span class="ruby-identifier">block</span>)
64:         <span class="ruby-identifier">install_hook</span> <span class="ruby-value">:before</span>, <span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">method_sym</span>, <span class="ruby-value">:class</span>, &amp;<span class="ruby-identifier">block</span>
65:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="class-hooks-method" class="method-detail ">
				<a name="method-i-class_hooks"></a>

				<div class="method-heading">
				
					<span class="method-name">class_hooks</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="class-hooks-source">
<pre>
     <span class="ruby-comment cmt"># File lib/extlib/hook.rb, line 155</span>
155:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">class_hooks</span>
156:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">const_get</span>(<span class="ruby-value str">&quot;CLASS_HOOKS&quot;</span>)
157:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="define-advised-method-method" class="method-detail ">
				<a name="method-i-define_advised_method"></a>

				<div class="method-heading">
				
					<span class="method-name">define_advised_method</span><span
						class="method-args">(target_method, scope)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="define-advised-method-source">
<pre>
     <span class="ruby-comment cmt"># File lib/extlib/hook.rb, line 283</span>
283:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">define_advised_method</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">scope</span>)
284:         <span class="ruby-identifier">args</span> = <span class="ruby-identifier">args_for</span>(<span class="ruby-identifier">method_with_scope</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">scope</span>))
285: 
286:         <span class="ruby-identifier">renamed_target</span> = <span class="ruby-identifier">hook_method_name</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-value str">'hookable_'</span>, <span class="ruby-value str">'before_advised'</span>)
287: 
288:         <span class="ruby-identifier">source</span> = <span class="ruby-value str">          def #{target_method}(#{args})            retval = nil            catch(:halt) do              #{hook_method_name(target_method, 'execute_before', 'hook_stack')}(#{args})              retval = #{renamed_target}(#{args})              #{hook_method_name(target_method, 'execute_after', 'hook_stack')}(retval, #{args})              retval            end          end</span>
289: 
290:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">scope</span> <span class="ruby-operator">==</span> <span class="ruby-value">:instance</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">instance_methods</span>(<span class="ruby-keyword kw">false</span>).<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">to_sym</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">target_method</span> }
291:           <span class="ruby-identifier">send</span>(<span class="ruby-value">:alias_method</span>, <span class="ruby-identifier">renamed_target</span>, <span class="ruby-identifier">target_method</span>)
292: 
293:           <span class="ruby-identifier">proxy_module</span> = <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>
294:           <span class="ruby-identifier">proxy_module</span>.<span class="ruby-identifier">class_eval</span>(<span class="ruby-identifier">source</span>, <span class="ruby-keyword kw">__FILE__</span>, <span class="ruby-keyword kw">__LINE__</span>)
295:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">send</span>(<span class="ruby-value">:include</span>, <span class="ruby-identifier">proxy_module</span>)
296:         <span class="ruby-keyword kw">else</span>
297:           <span class="ruby-identifier">source</span> = <span class="ruby-node">%{alias_method :#{renamed_target}, :#{target_method}\n#{source}}</span>
298:           <span class="ruby-identifier">source</span> = <span class="ruby-node">%{class &lt;&lt; self\n#{source}\nend}</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">scope</span> <span class="ruby-operator">==</span> <span class="ruby-value">:class</span>
299:           <span class="ruby-identifier">class_eval</span>(<span class="ruby-identifier">source</span>, <span class="ruby-keyword kw">__FILE__</span>, <span class="ruby-keyword kw">__LINE__</span>)
300:         <span class="ruby-keyword kw">end</span>
301:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="define-hook-stack-execution-methods-method" class="method-detail ">
				<a name="method-i-define_hook_stack_execution_methods"></a>

				<div class="method-heading">
				
					<span class="method-name">define_hook_stack_execution_methods</span><span
						class="method-args">(target_method, scope)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Defines two methods. One method executes the before hook stack. The other
executes the after hook stack. This method will be called many times during
the <a href="../../Class.html">Class</a> definition process. It should be
called for each hook that is defined. It will also be called when a hook is
redefined (to make sure that the arity hasn&#8217;t changed).
</p>
					

					
					<div class="method-source-code"
						id="define-hook-stack-execution-methods-source">
<pre>
     <span class="ruby-comment cmt"># File lib/extlib/hook.rb, line 233</span>
233:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">define_hook_stack_execution_methods</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">scope</span>)
234:         <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">registered_as_hook?</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">scope</span>)
235:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;#{target_method} has not be registered as a hookable #{scope} method&quot;</span>
236:         <span class="ruby-keyword kw">end</span>
237: 
238:         <span class="ruby-identifier">hooks</span> = <span class="ruby-identifier">hooks_with_scope</span>(<span class="ruby-identifier">scope</span>)
239: 
240:         <span class="ruby-identifier">before_hooks</span> = <span class="ruby-identifier">hooks</span>[<span class="ruby-identifier">target_method</span>][<span class="ruby-value">:before</span>]
241:         <span class="ruby-identifier">before_hooks</span> = <span class="ruby-identifier">before_hooks</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">info</span><span class="ruby-operator">|</span> <span class="ruby-identifier">inline_call</span>(<span class="ruby-identifier">info</span>, <span class="ruby-identifier">scope</span>) }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
242: 
243:         <span class="ruby-identifier">after_hooks</span>  = <span class="ruby-identifier">hooks</span>[<span class="ruby-identifier">target_method</span>][<span class="ruby-value">:after</span>]
244:         <span class="ruby-identifier">after_hooks</span>  = <span class="ruby-identifier">after_hooks</span>.<span class="ruby-identifier">map</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">info</span><span class="ruby-operator">|</span> <span class="ruby-identifier">inline_call</span>(<span class="ruby-identifier">info</span>, <span class="ruby-identifier">scope</span>) }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
245: 
246:         <span class="ruby-identifier">before_hook_name</span> = <span class="ruby-identifier">hook_method_name</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-value str">'execute_before'</span>, <span class="ruby-value str">'hook_stack'</span>)
247:         <span class="ruby-identifier">after_hook_name</span>  = <span class="ruby-identifier">hook_method_name</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-value str">'execute_after'</span>,  <span class="ruby-value str">'hook_stack'</span>)
248: 
249:         <span class="ruby-identifier">hooks</span>[<span class="ruby-identifier">target_method</span>][<span class="ruby-value">:in</span>].<span class="ruby-identifier">class_eval</span> <span class="ruby-value str">          #{scope == :class ? 'class &lt;&lt; self' : ''}          private          remove_method :#{before_hook_name} if instance_methods(false).any? { |m| m.to_sym == :#{before_hook_name} }          def #{before_hook_name}(*args)            #{before_hooks}          end          remove_method :#{after_hook_name} if instance_methods(false).any? { |m| m.to_sym == :#{after_hook_name} }          def #{after_hook_name}(*args)            #{after_hooks}          end          #{scope == :class ? 'end' : ''}</span>, <span class="ruby-keyword kw">__FILE__</span>, <span class="ruby-keyword kw">__LINE__</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
250:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="hook-method-name-method" class="method-detail ">
				<a name="method-i-hook_method_name"></a>

				<div class="method-heading">
				
					<span class="method-name">hook_method_name</span><span
						class="method-args">(target_method, prefix, suffix)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Generates names for the various utility methods. We need to do this because
the various utility methods should not end in = so, while we&#8217;re at
it, we might as well get rid of all punctuation.
</p>
					

					
					<div class="method-source-code"
						id="hook-method-name-source">
<pre>
     <span class="ruby-comment cmt"># File lib/extlib/hook.rb, line 203</span>
203:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">hook_method_name</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">prefix</span>, <span class="ruby-identifier">suffix</span>)
204:         <span class="ruby-identifier">target_method</span> = <span class="ruby-identifier">target_method</span>.<span class="ruby-identifier">to_s</span>
205: 
206:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">target_method</span>[<span class="ruby-value">1</span>,<span class="ruby-value">1</span>]
207:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'?'</span> <span class="ruby-keyword kw">then</span> <span class="ruby-node">&quot;#{prefix}_#{target_method[0..-2]}_ques_#{suffix}&quot;</span>
208:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'!'</span> <span class="ruby-keyword kw">then</span> <span class="ruby-node">&quot;#{prefix}_#{target_method[0..-2]}_bang_#{suffix}&quot;</span>
209:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'='</span> <span class="ruby-keyword kw">then</span> <span class="ruby-node">&quot;#{prefix}_#{target_method[0..-2]}_eq_#{suffix}&quot;</span>
210:           <span class="ruby-comment cmt"># I add a _nan_ suffix here so that we don't ever encounter</span>
211:           <span class="ruby-comment cmt"># any naming conflicts.</span>
212:           <span class="ruby-keyword kw">else</span> <span class="ruby-node">&quot;#{prefix}_#{target_method[0..-1]}_nan_#{suffix}&quot;</span>
213:         <span class="ruby-keyword kw">end</span>
214:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="hooks-with-scope-method" class="method-detail ">
				<a name="method-i-hooks_with_scope"></a>

				<div class="method-heading">
				
					<span class="method-name">hooks_with_scope</span><span
						class="method-args">(scope)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Returns the correct HOOKS <a href="../../Hash.html">Hash</a> depending on
whether we are working with class methods or instance methods
</p>
					

					
					<div class="method-source-code"
						id="hooks-with-scope-source">
<pre>
     <span class="ruby-comment cmt"># File lib/extlib/hook.rb, line 147</span>
147:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">hooks_with_scope</span>(<span class="ruby-identifier">scope</span>)
148:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">scope</span>
149:           <span class="ruby-keyword kw">when</span> <span class="ruby-value">:class</span>    <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">class_hooks</span>
150:           <span class="ruby-keyword kw">when</span> <span class="ruby-value">:instance</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">instance_hooks</span>
151:           <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">'You need to pass :class or :instance as scope'</span>
152:         <span class="ruby-keyword kw">end</span>
153:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="inline-call-method" class="method-detail ">
				<a name="method-i-inline_call"></a>

				<div class="method-heading">
				
					<span class="method-name">inline_call</span><span
						class="method-args">(method_info, scope)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Returns ruby code that will invoke the hook. It checks the arity of the
hook method and passes arguments accordingly.
</p>
					

					
					<div class="method-source-code"
						id="inline-call-source">
<pre>
     <span class="ruby-comment cmt"># File lib/extlib/hook.rb, line 270</span>
270:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inline_call</span>(<span class="ruby-identifier">method_info</span>, <span class="ruby-identifier">scope</span>)
271:         <span class="ruby-constant">Extlib</span><span class="ruby-operator">::</span><span class="ruby-constant">Hook</span><span class="ruby-operator">::</span><span class="ruby-constant">ClassMethods</span>.<span class="ruby-identifier">hook_scopes</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">method_info</span>[<span class="ruby-value">:from</span>]
272:         <span class="ruby-identifier">name</span> = <span class="ruby-identifier">method_info</span>[<span class="ruby-value">:name</span>]
273: 
274:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">scope</span> <span class="ruby-operator">==</span> <span class="ruby-value">:instance</span>
275:           <span class="ruby-identifier">args</span> = <span class="ruby-identifier">method_defined?</span>(<span class="ruby-identifier">name</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">instance_method</span>(<span class="ruby-identifier">name</span>).<span class="ruby-identifier">arity</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-value str">'*args'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">''</span>
276:           <span class="ruby-node">%(#{name}(#{args}) if self.class &lt;= Extlib::Hook::ClassMethods.object_by_id(#{method_info[:from].object_id}))</span>
277:         <span class="ruby-keyword kw">else</span>
278:           <span class="ruby-identifier">args</span> = <span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">name</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">method</span>(<span class="ruby-identifier">name</span>).<span class="ruby-identifier">arity</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-value str">'*args'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">''</span>
279:           <span class="ruby-node">%(#{name}(#{args}) if self &lt;= Extlib::Hook::ClassMethods.object_by_id(#{method_info[:from].object_id}))</span>
280:         <span class="ruby-keyword kw">end</span>
281:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="install-hook-method" class="method-detail ">
				<a name="method-i-install_hook"></a>

				<div class="method-heading">
				
					<span class="method-name">install_hook</span><span
						class="method-args">(type, target_method, method_sym, scope, &block)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
&#8212; Add a hook &#8212;
</p>
					

					
					<div class="method-source-code"
						id="install-hook-source">
<pre>
     <span class="ruby-comment cmt"># File lib/extlib/hook.rb, line 315</span>
315:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install_hook</span>(<span class="ruby-identifier">type</span>, <span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">method_sym</span>, <span class="ruby-identifier">scope</span>, &amp;<span class="ruby-identifier">block</span>)
316:         <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-value str">'target_method'</span>, <span class="ruby-identifier">target_method</span>, <span class="ruby-constant">Symbol</span>
317:         <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-value str">'method_sym'</span>,    <span class="ruby-identifier">method_sym</span>,    <span class="ruby-constant">Symbol</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">method_sym</span>.<span class="ruby-identifier">nil?</span>
318:         <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-value str">'scope'</span>,         <span class="ruby-identifier">scope</span>,         <span class="ruby-constant">Symbol</span>
319: 
320:         <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">block_given?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">method_sym</span>.<span class="ruby-identifier">nil?</span>
321:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;You need to pass 2 arguments to \&quot;#{type}\&quot;.&quot;</span>
322:         <span class="ruby-keyword kw">end</span>
323: 
324:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">method_sym</span>.<span class="ruby-identifier">to_s</span>[<span class="ruby-value">1</span>,<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">'='</span>
325:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;Methods ending in = cannot be hooks&quot;</span>
326:         <span class="ruby-keyword kw">end</span>
327: 
328:         <span class="ruby-keyword kw">unless</span> [ <span class="ruby-value">:class</span>, <span class="ruby-value">:instance</span> ].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">scope</span>)
329:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">'You need to pass :class or :instance as scope'</span>
330:         <span class="ruby-keyword kw">end</span>
331: 
332:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">registered_as_hook?</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">scope</span>)
333:           <span class="ruby-identifier">hooks</span> = <span class="ruby-identifier">hooks_with_scope</span>(<span class="ruby-identifier">scope</span>)
334: 
335:           <span class="ruby-comment cmt">#if this hook is previously declared in a sibling or cousin we must move the :in class</span>
336:           <span class="ruby-comment cmt">#to the common ancestor to get both hooks to run.</span>
337:           <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">hooks</span>[<span class="ruby-identifier">target_method</span>][<span class="ruby-value">:in</span>] <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-keyword kw">self</span>)
338:             <span class="ruby-identifier">before_hook_name</span> = <span class="ruby-identifier">hook_method_name</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-value str">'execute_before'</span>, <span class="ruby-value str">'hook_stack'</span>)
339:             <span class="ruby-identifier">after_hook_name</span>  = <span class="ruby-identifier">hook_method_name</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-value str">'execute_after'</span>,  <span class="ruby-value str">'hook_stack'</span>)
340: 
341:             <span class="ruby-identifier">hooks</span>[<span class="ruby-identifier">target_method</span>][<span class="ruby-value">:in</span>].<span class="ruby-identifier">class_eval</span> <span class="ruby-value str">              remove_method :#{before_hook_name} if instance_methods(false).any? { |m| m.to_sym == :#{before_hook_name} }              def #{before_hook_name}(*args)                super              end              remove_method :#{after_hook_name} if instance_methods(false).any? { |m| m.to_sym == :#{before_hook_name} }              def #{after_hook_name}(*args)                super              end</span>, <span class="ruby-keyword kw">__FILE__</span>, <span class="ruby-keyword kw">__LINE__</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
342: 
343:             <span class="ruby-keyword kw">while</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">hooks</span>[<span class="ruby-identifier">target_method</span>][<span class="ruby-value">:in</span>] <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-keyword kw">self</span>) <span class="ruby-keyword kw">do</span>
344:               <span class="ruby-identifier">hooks</span>[<span class="ruby-identifier">target_method</span>][<span class="ruby-value">:in</span>] = <span class="ruby-identifier">hooks</span>[<span class="ruby-identifier">target_method</span>][<span class="ruby-value">:in</span>].<span class="ruby-identifier">superclass</span>
345:             <span class="ruby-keyword kw">end</span>
346: 
347:             <span class="ruby-identifier">define_hook_stack_execution_methods</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">scope</span>)
348:             <span class="ruby-identifier">hooks</span>[<span class="ruby-identifier">target_method</span>][<span class="ruby-value">:in</span>].<span class="ruby-identifier">class_eval</span>{<span class="ruby-identifier">define_advised_method</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">scope</span>)}
349:           <span class="ruby-keyword kw">end</span>
350:         <span class="ruby-keyword kw">else</span>
351:           <span class="ruby-identifier">register_hook</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">scope</span>)
352:           <span class="ruby-identifier">hooks</span> = <span class="ruby-identifier">hooks_with_scope</span>(<span class="ruby-identifier">scope</span>)
353:         <span class="ruby-keyword kw">end</span>
354: 
355:         <span class="ruby-comment cmt">#if  we were passed a block, create a method out of it.</span>
356:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block</span>
357:           <span class="ruby-identifier">method_sym</span> = <span class="ruby-node">&quot;__hooks_#{type}_#{quote_method(target_method)}_#{hooks[target_method][type].length}&quot;</span>.<span class="ruby-identifier">to_sym</span>
358:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">scope</span> <span class="ruby-operator">==</span> <span class="ruby-value">:class</span>
359:             <span class="ruby-identifier">meta_class</span>.<span class="ruby-identifier">instance_eval</span> <span class="ruby-keyword kw">do</span>
360:               <span class="ruby-identifier">define_method</span>(<span class="ruby-identifier">method_sym</span>, &amp;<span class="ruby-identifier">block</span>)
361:             <span class="ruby-keyword kw">end</span>
362:           <span class="ruby-keyword kw">else</span>
363:             <span class="ruby-identifier">define_method</span>(<span class="ruby-identifier">method_sym</span>, &amp;<span class="ruby-identifier">block</span>)
364:           <span class="ruby-keyword kw">end</span>
365:         <span class="ruby-keyword kw">end</span>
366: 
367:         <span class="ruby-comment cmt"># Adds method to the stack an redefines the hook invocation method</span>
368:         <span class="ruby-identifier">hooks</span>[<span class="ruby-identifier">target_method</span>][<span class="ruby-identifier">type</span>] <span class="ruby-operator">&lt;&lt;</span> { <span class="ruby-value">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">method_sym</span>, <span class="ruby-value">:from</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span> }
369:         <span class="ruby-identifier">define_hook_stack_execution_methods</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">scope</span>)
370:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="instance-hooks-method" class="method-detail ">
				<a name="method-i-instance_hooks"></a>

				<div class="method-heading">
				
					<span class="method-name">instance_hooks</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="instance-hooks-source">
<pre>
     <span class="ruby-comment cmt"># File lib/extlib/hook.rb, line 159</span>
159:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">instance_hooks</span>
160:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">const_get</span>(<span class="ruby-value str">&quot;INSTANCE_HOOKS&quot;</span>)
161:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="method-with-scope-method" class="method-detail ">
				<a name="method-i-method_with_scope"></a>

				<div class="method-heading">
				
					<span class="method-name">method_with_scope</span><span
						class="method-args">(name, scope)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="method-with-scope-source">
<pre>
     <span class="ruby-comment cmt"># File lib/extlib/hook.rb, line 396</span>
396:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">method_with_scope</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">scope</span>)
397:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">scope</span>
398:           <span class="ruby-keyword kw">when</span> <span class="ruby-value">:class</span>    <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">method</span>(<span class="ruby-identifier">name</span>)
399:           <span class="ruby-keyword kw">when</span> <span class="ruby-value">:instance</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">instance_method</span>(<span class="ruby-identifier">name</span>)
400:           <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">'You need to pass :class or :instance as scope'</span>
401:         <span class="ruby-keyword kw">end</span>
402:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="process-method-added-method" class="method-detail ">
				<a name="method-i-process_method_added"></a>

				<div class="method-heading">
				
					<span class="method-name">process_method_added</span><span
						class="method-args">(method_name, scope)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
This will need to be refactored
</p>
					

					
					<div class="method-source-code"
						id="process-method-added-source">
<pre>
     <span class="ruby-comment cmt"># File lib/extlib/hook.rb, line 217</span>
217:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">process_method_added</span>(<span class="ruby-identifier">method_name</span>, <span class="ruby-identifier">scope</span>)
218:         <span class="ruby-identifier">hooks_with_scope</span>(<span class="ruby-identifier">scope</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">hooks</span><span class="ruby-operator">|</span>
219:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hooks</span>[<span class="ruby-value">:before</span>].<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">hook</span><span class="ruby-operator">|</span> <span class="ruby-identifier">hook</span>[<span class="ruby-value">:name</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">method_name</span> }
220:             <span class="ruby-identifier">define_hook_stack_execution_methods</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">scope</span>)
221:           <span class="ruby-keyword kw">end</span>
222: 
223:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hooks</span>[<span class="ruby-value">:after</span>].<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">hook</span><span class="ruby-operator">|</span> <span class="ruby-identifier">hook</span>[<span class="ruby-value">:name</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">method_name</span> }
224:             <span class="ruby-identifier">define_hook_stack_execution_methods</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">scope</span>)
225:           <span class="ruby-keyword kw">end</span>
226:         <span class="ruby-keyword kw">end</span>
227:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="quote-method-method" class="method-detail ">
				<a name="method-i-quote_method"></a>

				<div class="method-heading">
				
					<span class="method-name">quote_method</span><span
						class="method-args">(name)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="quote-method-source">
<pre>
     <span class="ruby-comment cmt"># File lib/extlib/hook.rb, line 404</span>
404:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quote_method</span>(<span class="ruby-identifier">name</span>)
405:         <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\?$/</span>, <span class="ruby-value str">'_q_'</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/!$/</span>, <span class="ruby-value str">'_b_'</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/=$/</span>, <span class="ruby-value str">'_eq_'</span>)
406:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="register-class-hooks-method" class="method-detail ">
				<a name="method-i-register_class_hooks"></a>

				<div class="method-heading">
				
					<span class="method-name">register_class_hooks</span><span
						class="method-args">(*hooks)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Register a class method as hookable. Registering a method means that before
hooks will be run immediately before the method is invoked and after hooks
will be called immediately after the method is invoked.
</p>
<p>
@param hookable_method<Symbol> The name of the class method that should
</p>
<pre>
  be hookable
</pre>
<ul>
<li><p>
@api public
</p>
</li>
</ul>
					

					
					<div class="method-source-code"
						id="register-class-hooks-source">
<pre>
     <span class="ruby-comment cmt"># File lib/extlib/hook.rb, line 122</span>
122:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">register_class_hooks</span>(*<span class="ruby-identifier">hooks</span>)
123:         <span class="ruby-identifier">hooks</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">hook</span><span class="ruby-operator">|</span> <span class="ruby-identifier">register_hook</span>(<span class="ruby-identifier">hook</span>, <span class="ruby-value">:class</span>) }
124:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="register-hook-method" class="method-detail ">
				<a name="method-i-register_hook"></a>

				<div class="method-heading">
				
					<span class="method-name">register_hook</span><span
						class="method-args">(target_method, scope)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Registers a method as hookable. Registering hooks involves the following
process
</p>
<ul>
<li><p>
Create a blank entry in the HOOK <a href="../../Hash.html">Hash</a> for the
method.
</p>
</li>
<li><p>
Define the methods that execute the before and after hook stack. These
methods will be no-ops at first, but everytime a new hook is defined, the
methods will be redefined to incorporate the new hook.
</p>
</li>
<li><p>
Redefine the method that is to be hookable so that the hook stacks are
invoked approprietly.
</p>
</li>
</ul>
					

					
					<div class="method-source-code"
						id="register-hook-source">
<pre>
     <span class="ruby-comment cmt"># File lib/extlib/hook.rb, line 172</span>
172:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">register_hook</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">scope</span>)
173:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">scope</span> <span class="ruby-operator">==</span> <span class="ruby-value">:instance</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">method_defined?</span>(<span class="ruby-identifier">target_method</span>)
174:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;#{target_method} instance method does not exist&quot;</span>
175:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">scope</span> <span class="ruby-operator">==</span> <span class="ruby-value">:class</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">target_method</span>)
176:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;#{target_method} class method does not exist&quot;</span>
177:         <span class="ruby-keyword kw">end</span>
178: 
179:         <span class="ruby-identifier">hooks</span> = <span class="ruby-identifier">hooks_with_scope</span>(<span class="ruby-identifier">scope</span>)
180: 
181:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hooks</span>[<span class="ruby-identifier">target_method</span>].<span class="ruby-identifier">nil?</span>
182:           <span class="ruby-identifier">hooks</span>[<span class="ruby-identifier">target_method</span>] = {
183:             <span class="ruby-comment cmt"># We need to keep track of which class in the Inheritance chain the</span>
184:             <span class="ruby-comment cmt"># method was declared hookable in. Every time a child declares a new</span>
185:             <span class="ruby-comment cmt"># hook for the method, the hook stack invocations need to be redefined</span>
186:             <span class="ruby-comment cmt"># in the original Class. See #define_hook_stack_execution_methods</span>
187:             <span class="ruby-value">:before</span> =<span class="ruby-operator">&gt;</span> [], <span class="ruby-value">:after</span> =<span class="ruby-operator">&gt;</span> [], <span class="ruby-value">:in</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>
188:           }
189: 
190:           <span class="ruby-identifier">define_hook_stack_execution_methods</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">scope</span>)
191:           <span class="ruby-identifier">define_advised_method</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">scope</span>)
192:         <span class="ruby-keyword kw">end</span>
193:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="register-instance-hooks-method" class="method-detail ">
				<a name="method-i-register_instance_hooks"></a>

				<div class="method-heading">
				
					<span class="method-name">register_instance_hooks</span><span
						class="method-args">(*hooks)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Register aninstance method as hookable. Registering a method means that
before hooks will be run immediately before the method is invoked and after
hooks will be called immediately after the method is invoked.
</p>
<p>
@param hookable_method<Symbol> The name of the instance method that should
</p>
<pre>
  be hookable
</pre>
<ul>
<li><p>
@api public
</p>
</li>
</ul>
					

					
					<div class="method-source-code"
						id="register-instance-hooks-source">
<pre>
     <span class="ruby-comment cmt"># File lib/extlib/hook.rb, line 134</span>
134:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">register_instance_hooks</span>(*<span class="ruby-identifier">hooks</span>)
135:         <span class="ruby-identifier">hooks</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">hook</span><span class="ruby-operator">|</span> <span class="ruby-identifier">register_hook</span>(<span class="ruby-identifier">hook</span>, <span class="ruby-value">:instance</span>) }
136:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="registered-as-hook--method" class="method-detail ">
				<a name="method-i-registered_as_hook%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">registered_as_hook?</span><span
						class="method-args">(target_method, scope)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Is the method registered as a hookable in the given scope.
</p>
					

					
					<div class="method-source-code"
						id="registered-as-hook--source">
<pre>
     <span class="ruby-comment cmt"># File lib/extlib/hook.rb, line 196</span>
196:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">registered_as_hook?</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">scope</span>)
197:         <span class="ruby-operator">!</span> <span class="ruby-identifier">hooks_with_scope</span>(<span class="ruby-identifier">scope</span>)[<span class="ruby-identifier">target_method</span>].<span class="ruby-identifier">nil?</span>
198:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="reset-hook--method" class="method-detail ">
				<a name="method-i-reset_hook%21"></a>

				<div class="method-heading">
				
					<span class="method-name">reset_hook!</span><span
						class="method-args">(target_method, scope)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Not yet implemented
</p>
					

					
					<div class="method-source-code"
						id="reset-hook--source">
<pre>
     <span class="ruby-comment cmt"># File lib/extlib/hook.rb, line 139</span>
139:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">reset_hook!</span>(<span class="ruby-identifier">target_method</span>, <span class="ruby-identifier">scope</span>)
140:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>
141:       <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	

	</div>


	<div id="rdoc-debugging-section-dump" class="debugging-section">
	
		<p>Disabled; run with --debug to generate this.</p>
	
	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>

</body>
</html>

